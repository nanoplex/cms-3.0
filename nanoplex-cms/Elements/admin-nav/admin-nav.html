<dom-module id="admin-nav">

    <style>
        :host > section iron-icon {
            fill: white !important;
        }

        :host {
            border-right: 1px solid;
        }

        paper-input {
            margin: -10.5px 0;
            --paper-input-container-input-color: #212121;
            --paper-input-container-color: #212121;
            --paper-input-container-focus-color: #212121;
        }

        .selected {
            background: #9E9E9E;
        }

        nav {
            border-top: 1px solid;
        }

        nav, .page, .page p {
            width: 100%;
        }

        .page {
            height: 40px;
            padding: .5em;
            overflow: hidden;
            border-bottom: 1px solid;
            -moz-transform: scaleY(1);
            -ms-transform: scaleY(1);
            -o-transform: scaleY(1);
            -webkit-transform: scaleY(1);
            transform: scaleY(1);
            -moz-transform-origin: 18px 0;
            -ms-transform-origin: 18px 0;
            -o-transform-origin: 18px 0;
            -webkit-transform-origin: 18px 0;
            transform-origin: 18px 0;
            -moz-transition: .3s transform;
            -o-transition: .3s transform;
            -webkit-transition: .3s transform;
            transition: .3s transform;
        }

            .page[hidden] {
                display: flex !important;
                max-height: 0;
                margin-bottom: -17px;
                -moz-transform: scaleY(0);
                -ms-transform: scaleY(0);
                -o-transform: scaleY(0);
                -webkit-transform: scaleY(0);
                transform: scaleY(0);
            }

            .page p {
                margin: 0;
                text-align: start;
            }

            .page button {
                padding: 0;
            }

            .page article:first-child {
                margin-right: .5em;
                -moz-transition: .3s width;
                -o-transition: .3s width;
                -webkit-transition: .3s width;
                transition: .3s width;
                width: 11px;
                overflow: hidden;
            }

            .page article[hidden] {
                display: block !important;
                width: 0;
            }

            .page > button {
                margin: 0 .5em;
                -moz-transition: .3s width;
                -o-transition: .3s width;
                -webkit-transition: .3s width;
                transition: .3s width;
                overflow: hidden;
                width: 20px;
            }

                .page > button[hidden] {
                    display: block !important;
                    width: 0;
                }

        section {
            width: 100%;
            background: #616161;
        }

        .btn iron-icon {
            fill: black;
        }

        .btn:hover {
            background: transparent;
        }

        paper-material {
            background: white;
            padding: 1em;
            margin: 2em;
            width: 100%;
            max-width: 700px;
        }

        #addPage h2 {
        }

        #addPage button:hover {
            background: rgba(0,0,0,.15);
        }

        #addPage iron-icon {
            fill: #212121;
        }

        #addPage paper-input {
            margin-bottom: 1em;
        }

        p {
            cursor: pointer;
        }
    </style>

    <template>

        <nav class="flex">

            <template is="dom-repeat"
                      items="{{pages}}">

                <div index$="{{index}}"
                     class="page layout horizontal center">

                    <article class="layout vertical center"
                             hidden$="{{!editMode}}">

                        <button class="btn small">

                            <iron-icon icon="expand-less" alt="up">
                            </iron-icon>

                        </button>

                        <button class="btn small">
                            <iron-icon icon="expand-more" alt="down">
                            </iron-icon>
                        </button>

                    </article>

                    <article class="name flex">

                        <p on-tap="changePage" hidden$="{{editMode}}">{{item.Name}}</p>

                        <paper-input label="page name"
                                     type="text"
                                     value$="[[item.Name]]"
                                     on-input="updatePageName"
                                     no-label-float hidden$="{{!editMode}}">
                        </paper-input>

                    </article>

                    <button on-tap="deletePage"
                            class="btn small"
                            hidden$="{{!editMode}}">

                        <iron-icon icon="close">
                        </iron-icon>

                    </button>
                </div>

            </template>

        </nav>

        <section class="layout horizontal center justified">

            <button on-tap="toggleEditmode"
                    class="btn small">

                <iron-icon icon="create" alt="edit">
                </iron-icon>

            </button>

            <button on-tap="openAddPage"
                    class="btn small">

                <iron-icon icon="add" alt="add">
                </iron-icon>

            </button>

        </section>

        <div id="addPage"
             class="layout vertical center fit"
             hidden>

            <paper-material class="layout vertical">

                <article class="layout horizontal center">

                    <h2 class="flex">Add page</h2>

                    <button on-tap="closeAddPage"
                            class="btn">

                        <iron-icon icon="close">
                        </iron-icon>

                    </button>

                </article>

                <paper-input label="page name"
                             on-input="validatePageName">
                </paper-input>

                <button on-tap="addPage"
                        class="btn self-end">

                    <iron-icon icon="done"
                               alt="add page">
                    </iron-icon>

                </button>

            </paper-material>

        </div>

    </template>

</dom-module>

<script src="admin-nav.js"></script>